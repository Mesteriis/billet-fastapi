# –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤ - –°–≤–æ–¥–∫–∞

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **`logging_config.py`** - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **`conftest_logging.py`** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å pytest
- **`test_logging_example.py`** - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **`LOGGING_GUIDE.md`** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### 2. –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —à—É–º–Ω—ã—Ö –ª–æ–≥–µ—Ä–æ–≤

```python
NOISY_LOGGERS = {
    'httpx': logging.WARNING,
    'urllib3': logging.WARNING,
    'sqlalchemy': logging.WARNING,
    'fastapi': logging.WARNING,
    'uvicorn': logging.WARNING,
    'websockets': logging.WARNING,
    # ... –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ
}
```

#### –ì–∏–±–∫–∏–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

- **–¢–∏—Ö–∏–π —Ä–µ–∂–∏–º** (`quiet`) - —Ç–æ–ª—å–∫–æ ERROR –∏ –≤—ã—à–µ
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º** (`normal`) - INFO –∏ –≤—ã—à–µ
- **–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º** (`verbose`) - DEBUG –∏ –≤—ã—à–µ

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export TEST_LOG_LEVEL=quiet    # –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º
export TEST_LOG_LEVEL=verbose  # –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º
export TEST_LOG_LEVEL=normal   # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å pytest

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã

- `setup_logging_for_tests` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- `quiet_logger` - –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –ª–æ–≥–µ—Ä–æ–≤
- `verbose_logger` - –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `capture_logs` - –∑–∞—Ö–≤–∞—Ç –ª–æ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö

#### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã

```python
@pytest.mark.quiet_logs
def test_with_quiet_logging():
    pass

@pytest.mark.verbose_logs
def test_with_verbose_logging():
    pass
```

### 4. –ö–æ–º–∞–Ω–¥—ã Makefile

```bash
make test-quiet    # –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º
make test-verbose  # –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–µ–∂–∏–º
make test-debug    # –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ —Å pdb
make test-silent   # –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–∑ –ª–æ–≥–æ–≤
```

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AsyncApiTestClient

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- Fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ª–æ–≥–µ—Ä –µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –ß–∏—Å—Ç—ã–π –≤—ã–≤–æ–¥ —Ç–µ—Å—Ç–æ–≤

- –û—Ç–∫–ª—é—á–µ–Ω—ã –ª–æ–≥–∏ –æ—Ç httpx, urllib3, sqlalchemy –∏ –¥—Ä—É–≥–∏—Ö —à—É–º–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
- –í–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–¥–∞
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –≤—ã–≤–æ–¥–∞

### 2. –ì–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- –õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≤–æ–¥–∞

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- –û—Å–æ–±–µ–Ω–Ω–æ –∑–∞–º–µ—Ç–Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ DB –æ–ø–µ—Ä–∞—Ü–∏–π

### 4. –û—Ç–ª–∞–¥–∫–∞

- –õ–µ–≥–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ó–∞—Ö–≤–∞—Ç –ª–æ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö

## üìã –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from tests.utils_test.logging_config import test_logger

def test_something():
    test_logger.info("–ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç")
    # –≤–∞—à –∫–æ–¥
    test_logger.info("–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω")
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```python
def test_with_custom_logging():
    TestLoggingConfig.setup_test_logging(quiet_mode=True)
    # —Ç–µ—Å—Ç —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ –ª–æ–≥–µ—Ä–∞–º–∏
```

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```python
def test_debug_issue():
    TestLoggingConfig.enable_debug_for(['sqlalchemy', 'httpx'])
    # —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω—ã –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –∏ HTTP –≤—ã–∑–æ–≤—ã
```

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```bash
# –û–±—ã—á–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —á–∏—Å—Ç—ã–º –≤—ã–≤–æ–¥–æ–º
make test-quiet

# –û—Ç–ª–∞–¥–∫–∞ —Å –ø–æ–ª–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
make test-verbose

# –û—Ç–ª–∞–¥–∫–∞ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ –æ—à–∏–±–∫–∞—Ö
make test-debug

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
make test-silent

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
TEST_LOG_LEVEL=quiet pytest
TEST_LOG_LEVEL=verbose pytest -s
```

## üìä –û—Ç–∫–ª—é—á–∞–µ–º—ã–µ –ª–æ–≥–µ—Ä—ã

### HTTP –∏ —Å–µ—Ç—å

- httpx, httpcore, urllib3, requests
- websockets (–≤—Å–µ –ø–æ–¥–º–æ–¥—É–ª–∏)

### Web —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏

- fastapi, uvicorn, starlette

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- sqlalchemy (–≤—Å–µ –ø–æ–¥–º–æ–¥—É–ª–∏), alembic

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- pytest, \_pytest, pytest_asyncio

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

- pydantic, marshmallow

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- passlib, jose, cryptography

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- faker, factory_boy

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –æ–ø—ã—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ—Å—Ç–æ–≤:

1. **–ß–∏—Å—Ç—ã–π –≤—ã–≤–æ–¥** - –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
2. **–ë—ã—Å—Ç—Ä–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –ª–µ–≥–∫–æ –≤–∫–ª—é—á–∏—Ç—å –Ω—É–∂–Ω—ã–µ –ª–æ–≥–∏
3. **–ì–∏–±–∫–æ—Å—Ç—å** - —Ä–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ = –±—ã—Å—Ç—Ä–µ–µ —Ç–µ—Å—Ç—ã
5. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–∏—Ö–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –≤–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.
